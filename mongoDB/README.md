# MongoDB

### Data Models
There are two types of data models:
1. Relational Model: Data is a set of relations and each relation has well-defined schema. The problem is that it can be hard to maintain this schema. Otherwise, if you have to make changes to schema, you would need to restructure the entire relation which can be cumbersome. Structured Query Language (SQL) is used to query data from relational models.
2. Non-Relational Model: 
    1. Document Model: Data is set of documents and each document is key-value store. Data is more localized i.e., all the information about a document resides within document. However, it can be harder to join different documents compared to relational models. MongoDB, Azure Cosmos DB, Cassandra DB are examples of No-SQL (Not Only SQL) databases.
    2. Graph Model: This type of database is used when relationships between data sources are dominant over data sources itself. Neo4j is an example of Graph database.

### Static v/s Dynamic Models
Static models are those which are trained at pre-defined intervals, for example - 3 months. Training is stateless i.e. models are trained from scratch. Such models are built where things do not change at a fast rate - for example, forecasting.

Dynamic models are those which are trained at short intervals, for example - hourly/daily/weekly etc. Training is stateful i.e. models are finetuned on incoming data. Such models are built where things change at a very fast rate - for example, Twitter Hashtag prediction, Recommendations - YouTube videos/ Instagram Feed, predicting ETA on Zomato.

### Stateful v/s Stateless Training
Once the model is deployed, the model needs to be continuously monitored for following **data distributions shifts**:
1. Covariate Shift: P(X) changes, P(Y|X) remains same
2. Label Shift: P(Y) changes, P(X|Y) remains same
3. Concept Drift: P(X) remains same, P(Y|X) changes
where X is input distribution (features), Y is target distribution (predictions). Consequently, with any significant shift/drift, or periodically otherwise, the models are updated for maintaining performance.

So, the new model can either be:
1. Trained from scratch with incoming predictions - stateless training. Typically, when models are updated at long periods. 
2. Finetuned with incoming predictions - stateful training. Typically, when models are updated at short periods.  

**Continual Learning:** Stateful learning. Fine-tuning model with incoming predictions while model being deployed. The weights are not updated with every prediction made but over a batch of predictions. The new model also needs to ensure that it's better than previous through A/B testing.

We will look into building a basic web-app using Flask that takes in input as features and makes predictions of Iris type on Iris dataset. After a batch of predictions are generated by user, the model is fine-tuned (Continual Learning - Stateful Learning) on predictions. This helps in model generalize with incoming data and learn in life-long fashion.

Steps:
1. Training the model
2. Saving the model as artifact (.pkl)
3. Building web-app using Flask
4. MongoDB steps:
    1. Establish connection with MongoDB
    2. Creating a database
    3. Creating a collection (table), where predictions will be stored
5. Running web-app and making predictions
6. Fine-tuning the model with incoming predictions
7. Saving the fine-tuned model